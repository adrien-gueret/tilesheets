{"version":3,"sources":["../src/models/Scene.js","../src/models/Sprite.js","../src/models/Tilesheet.js","../index.js","scripts/tilesheet_bush.ts","scripts/tilesheet_index_sample.ts","scripts/tilesheet_advanced.ts","scripts/scene_sample.ts","scripts/sprite_animated.ts","index.ts"],"names":["__read","o","n","m","Symbol","iterator","i","r","e","call","ar","next","done","push","value","error","__spread","arguments","length","concat","cloneDeepArrays","arraysToClone","map","arr","slice","Object","defineProperty","exports","Scene","tiles","canvas","animationClocks","initialTiles","prototype","getWidth","width","tilesheet","getTileSize","Math","max","apply","row","getHeight","height","setCanvas","setTile","x","y","newTile","renderTile","columnIndex","rowIndex","ctx","getContext","tileIndex","_a","getTileRect","drawImage","getImage","render","_this","Error","forEach","rowTiles","resetTiles","updateTilesFromArray","currentTileIndex","nextTileIndex","useTilesheet","clock","window","clearInterval","getAnimations","animation","setInterval","speed","default","Sprite","setCurrentTile","stopAnimation","animationClock","shouldLoop","playAnimation","name","getAnimation","currentAnimationIndex","destX","destY","__assign","assign","t","s","p","hasOwnProperty","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","body","_","f","g","label","sent","trys","ops","verb","v","op","TypeError","pop","Tilesheet","imagePath","tileWidth","tileHeight","margin","animations","image","Image","src","filter","setAnimations","setTileSize","setMargin","complete","naturalWidth","totalTilesOnRow","ceil","floor","column","getTileStyle","rectangle","display","backgroundImage","backgroundPosition","getTileDomElement","domElement","document","createElement","tileStyle","keys","styleProp","style","waitForLoading","onload","onerror","Scene_1","require","Sprite_1","Tilesheet_1"],"mappings":"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","file":"examples.cce9565a.map","sourceRoot":"..\\examples","sourcesContent":["\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spread = (this && this.__spread) || function () {\r\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction cloneDeepArrays(arraysToClone) {\r\n    return arraysToClone.map(function (arr) { return arr.slice(); });\r\n}\r\nvar Scene = (function () {\r\n    function Scene(tiles, canvas) {\r\n        if (tiles === void 0) { tiles = []; }\r\n        if (canvas === void 0) { canvas = null; }\r\n        this.animationClocks = [];\r\n        this.initialTiles = cloneDeepArrays(tiles);\r\n        this.tiles = cloneDeepArrays(tiles);\r\n        this.canvas = canvas;\r\n    }\r\n    Scene.prototype.getWidth = function () {\r\n        var width = this.tilesheet.getTileSize().width;\r\n        var maxLength = Math.max.apply(Math, __spread(this.tiles.map(function (row) { return row.length; })));\r\n        return width * maxLength;\r\n    };\r\n    Scene.prototype.getHeight = function () {\r\n        var height = this.tilesheet.getTileSize().height;\r\n        return this.tiles.length * height;\r\n    };\r\n    Scene.prototype.setCanvas = function (canvas) {\r\n        this.canvas = canvas;\r\n        return this;\r\n    };\r\n    Scene.prototype.setTile = function (x, y, newTile) {\r\n        this.tiles[y][x] = newTile;\r\n        return this;\r\n    };\r\n    Scene.prototype.renderTile = function (columnIndex, rowIndex, canvas) {\r\n        if (canvas === void 0) { canvas = this.canvas; }\r\n        var ctx = canvas.getContext('2d');\r\n        var tileIndex = this.tiles[rowIndex][columnIndex];\r\n        var _a = this.tilesheet.getTileRect(tileIndex), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n        ctx.drawImage(this.tilesheet.getImage(), x, y, width, height, columnIndex * width, rowIndex * height, width, height);\r\n        return this;\r\n    };\r\n    Scene.prototype.render = function (canvas) {\r\n        var _this = this;\r\n        if (canvas === void 0) { canvas = this.canvas; }\r\n        if (!this.tilesheet) {\r\n            throw new Error('Scene::render: tilesheet is not defined.');\r\n        }\r\n        if (!canvas) {\r\n            throw new Error('Scene::render: no canvas provided.');\r\n        }\r\n        canvas.width = this.getWidth();\r\n        canvas.height = this.getHeight();\r\n        this.tiles.forEach(function (rowTiles, rowIndex) {\r\n            rowTiles.forEach(function (tileIndex, columnIndex) {\r\n                _this.renderTile(columnIndex, rowIndex, canvas);\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    Scene.prototype.resetTiles = function () {\r\n        this.tiles = cloneDeepArrays(this.initialTiles);\r\n        return this;\r\n    };\r\n    Scene.prototype.updateTilesFromArray = function (tiles, currentTileIndex) {\r\n        var _this = this;\r\n        var nextTileIndex = currentTileIndex + 1;\r\n        if (!tiles[nextTileIndex]) {\r\n            nextTileIndex = 0;\r\n        }\r\n        this.tiles.forEach(function (rowTiles, rowIndex) {\r\n            rowTiles.forEach(function (tileIndex, columnIndex) {\r\n                if (tileIndex !== tiles[currentTileIndex]) {\r\n                    return;\r\n                }\r\n                var newTile = tiles[nextTileIndex];\r\n                _this.setTile(columnIndex, rowIndex, newTile);\r\n                if (_this.canvas) {\r\n                    _this.renderTile(columnIndex, rowIndex);\r\n                }\r\n            });\r\n        });\r\n        return nextTileIndex;\r\n    };\r\n    Scene.prototype.useTilesheet = function (tilesheet) {\r\n        var _this = this;\r\n        this.tilesheet = tilesheet;\r\n        this.animationClocks.forEach(function (clock) {\r\n            window.clearInterval(clock);\r\n        });\r\n        this.animationClocks = this.tilesheet.getAnimations().map(function (animation) {\r\n            var tileIndex = 0;\r\n            return window.setInterval(function () {\r\n                tileIndex = _this.updateTilesFromArray(animation.tiles, tileIndex);\r\n            }, animation.speed);\r\n        });\r\n        return this;\r\n    };\r\n    return Scene;\r\n}());\r\nexports.default = Scene;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Sprite = (function () {\r\n    function Sprite(canvas) {\r\n        if (canvas === void 0) { canvas = null; }\r\n        this.currentTileIndex = 0;\r\n        this.canvas = canvas;\r\n    }\r\n    Sprite.prototype.setCanvas = function (canvas) {\r\n        this.canvas = canvas;\r\n        return this;\r\n    };\r\n    Sprite.prototype.setCurrentTile = function (tileIndex) {\r\n        this.currentTileIndex = tileIndex;\r\n        return this;\r\n    };\r\n    Sprite.prototype.stopAnimation = function () {\r\n        window.clearInterval(this.animationClock);\r\n        return this;\r\n    };\r\n    Sprite.prototype.updateTilesFromArray = function (tiles, currentTileIndex, shouldLoop) {\r\n        var nextTileIndex = currentTileIndex + 1;\r\n        if (!tiles[nextTileIndex]) {\r\n            nextTileIndex = 0;\r\n            if (!shouldLoop) {\r\n                this.stopAnimation();\r\n                return nextTileIndex;\r\n            }\r\n        }\r\n        this.setCurrentTile(tiles[nextTileIndex]).render();\r\n        return nextTileIndex;\r\n    };\r\n    Sprite.prototype.playAnimation = function (name, shouldLoop) {\r\n        var _this = this;\r\n        if (shouldLoop === void 0) { shouldLoop = true; }\r\n        var animation = this.tilesheet.getAnimation(name);\r\n        if (!animation) {\r\n            throw new Error(\"Sprite::playAnimation: animation \\\"\" + name + \"\\\" not found\");\r\n        }\r\n        this.stopAnimation();\r\n        var currentAnimationIndex = 0;\r\n        this.setCurrentTile(animation.tiles[currentAnimationIndex]).render();\r\n        this.animationClock = window.setInterval(function () {\r\n            currentAnimationIndex = _this.updateTilesFromArray(animation.tiles, currentAnimationIndex, shouldLoop);\r\n        }, animation.speed);\r\n        return this;\r\n    };\r\n    Sprite.prototype.render = function (canvas, destX, destY) {\r\n        if (canvas === void 0) { canvas = this.canvas; }\r\n        if (destX === void 0) { destX = 0; }\r\n        if (destY === void 0) { destY = 0; }\r\n        var _a = this.tilesheet.getTileRect(this.currentTileIndex), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n        if (canvas === this.canvas) {\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n        }\r\n        var ctx = canvas.getContext('2d');\r\n        ctx.drawImage(this.tilesheet.getImage(), x, y, width, height, destX, destY, width, height);\r\n        return this;\r\n    };\r\n    Sprite.prototype.useTilesheet = function (tilesheet) {\r\n        this.tilesheet = tilesheet;\r\n        this.stopAnimation();\r\n        return this;\r\n    };\r\n    return Sprite;\r\n}());\r\nexports.default = Sprite;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Tilesheet = (function () {\r\n    function Tilesheet(imagePath) {\r\n        this.tileWidth = 16;\r\n        this.tileHeight = 16;\r\n        this.margin = 1;\r\n        this.animations = [];\r\n        this.image = new Image();\r\n        this.image.src = imagePath;\r\n    }\r\n    Tilesheet.prototype.getAnimations = function () {\r\n        return this.animations;\r\n    };\r\n    Tilesheet.prototype.getAnimation = function (name) {\r\n        return this.animations.filter(function (animation) { return animation.name === name; })[0];\r\n    };\r\n    Tilesheet.prototype.setAnimations = function (animations) {\r\n        this.animations = animations;\r\n        return this;\r\n    };\r\n    Tilesheet.prototype.getTileSize = function () {\r\n        return {\r\n            width: this.tileWidth,\r\n            height: this.tileHeight,\r\n        };\r\n    };\r\n    Tilesheet.prototype.setTileSize = function (width, height) {\r\n        if (height === void 0) { height = width; }\r\n        this.tileWidth = width;\r\n        this.tileHeight = height;\r\n        return this;\r\n    };\r\n    Tilesheet.prototype.setMargin = function (margin) {\r\n        this.margin = margin;\r\n        return this;\r\n    };\r\n    Tilesheet.prototype.getImage = function () {\r\n        return this.image;\r\n    };\r\n    Tilesheet.prototype.getTileRect = function (tileIndex) {\r\n        if (!this.image.complete) {\r\n            throw new Error('Tilesheets::getTileRect: image is not fully loaded yet.');\r\n        }\r\n        var naturalWidth = this.image.naturalWidth;\r\n        var totalTilesOnRow = Math.ceil(naturalWidth / (this.tileWidth + this.margin));\r\n        var row = Math.floor(tileIndex / totalTilesOnRow);\r\n        var column = tileIndex % totalTilesOnRow;\r\n        return __assign({ x: column * this.tileWidth + column * this.margin, y: row * this.tileHeight + row * this.margin }, this.getTileSize());\r\n    };\r\n    Tilesheet.prototype.getTileStyle = function (tileIndex) {\r\n        if (!this.image.complete) {\r\n            throw new Error('Tilesheets::getTileStyle: image is not fully loaded yet.');\r\n        }\r\n        var rectangle = this.getTileRect(tileIndex);\r\n        return {\r\n            display: 'inline-block',\r\n            width: rectangle.width + \"px\",\r\n            height: rectangle.height + \"px\",\r\n            backgroundImage: \"url(\" + this.image.src + \")\",\r\n            backgroundPosition: \"-\" + rectangle.x + \"px -\" + rectangle.y + \"px\",\r\n        };\r\n    };\r\n    Tilesheet.prototype.getTileDomElement = function (tileIndex) {\r\n        if (!this.image.complete) {\r\n            throw new Error('Tilesheets::getTileDomElement: image is not fully loaded yet.');\r\n        }\r\n        var domElement = document.createElement('span');\r\n        var tileStyle = this.getTileStyle(tileIndex);\r\n        Object.keys(tileStyle).forEach(function (styleProp) {\r\n            domElement.style[styleProp] = tileStyle[styleProp];\r\n        });\r\n        return domElement;\r\n    };\r\n    Tilesheet.prototype.waitForLoading = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this.image.complete) {\r\n                    return [2];\r\n                }\r\n                return [2, new Promise(function (resolve, reject) {\r\n                        _this.image.onload = resolve;\r\n                        _this.image.onerror = reject;\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    return Tilesheet;\r\n}());\r\nexports.default = Tilesheet;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Scene_1 = require(\"./src/models/Scene\");\r\nexports.Scene = Scene_1.default;\r\nvar Sprite_1 = require(\"./src/models/Sprite\");\r\nexports.Sprite = Sprite_1.default;\r\nvar Tilesheet_1 = require(\"./src/models/Tilesheet\");\r\nexports.Tilesheet = Tilesheet_1.default;\r\n","import { Sprite } from '../../';\r\n\r\nexport default (sheetSpring, sheetFall) => {\r\n    const bushTile = sheetSpring.getTileDomElement(5);\r\n    document.getElementById('bush_sample').appendChild(bushTile);\r\n\r\n    const bush = new Sprite(document.getElementById('canvas_bush_sample') as HTMLCanvasElement);\r\n    bush\r\n        .useTilesheet(sheetSpring)\r\n        .setCurrentTile(5)\r\n        .render();\r\n\r\n    const bush2 = new Sprite(document.getElementById('canvas_bush_sample2') as HTMLCanvasElement);\r\n    bush2\r\n        .useTilesheet(sheetFall)\r\n        .setCurrentTile(5)\r\n        .render();\r\n};","export default (sheetSpring) => {\r\n    const table = document.getElementById('tilesheet_index_sample');\r\n    \r\n    table.style.backgroundImage = `linear-gradient(rgba(255, 255, 255, .7), rgba(255, 255, 255, .7)), url(${sheetSpring.image.src})`;\r\n    table.style.width = `${sheetSpring.image.naturalWidth}px`;\r\n    table.style.height = `${sheetSpring.image.naturalHeight}px`;\r\n\r\n    const rowsFragment = document.createDocumentFragment();\r\n    let tileIndex = 0;\r\n    \r\n    for (let row = 0; row <= 7; row++) {\r\n        const columnsFragment = document.createDocumentFragment();\r\n\r\n        for (let column = 0; column <= 6; column++) {\r\n            const td = document.createElement('td');\r\n            td.appendChild(document.createTextNode(`${tileIndex}`));\r\n            columnsFragment.appendChild(td);\r\n            tileIndex++;\r\n        }\r\n\r\n        const tr = document.createElement('tr');\r\n        tr.appendChild(columnsFragment);\r\n\r\n        rowsFragment.appendChild(tr);\r\n    }\r\n\r\n    table.appendChild(rowsFragment);\r\n};","import { Scene } from '../../';\r\n\r\nexport default (sheetSpring, sheetSummer, sheetFall, sheetWinter) => {\r\n    const scene = new Scene([\r\n        [28, 29, 28, 29, 21, 22, 28, 29, 21, 22, 21, 22, 28, 29,  0,  0, 11, 42, 47, 47],\r\n        [ 8, 25, 26, 27, 28, 29,  5,  5, 28, 29, 28, 29,  5,  5,  5,  6,  5, 42, 47, 47],\r\n        [ 4, 32, 33, 34, 21, 22,  8,  8,  2,  3,  4, 21, 22, 17, 13,  5,  5, 42, 47, 47],\r\n        [17, 14, 14, 14, 28, 29,  8,  8,  9, 10,  7, 28, 29, 36, 36, 36, 36, 51, 47, 47],\r\n        [21, 22, 23, 24, 13, 13,  3,  3, 10, 10,  0, 11, 42, 38, 38, 38, 47, 47, 47, 47],\r\n        [28, 29, 30, 31, 13, 21, 22,  6,  1, 10,  0, 11, 42, 38, 38, 38, 47, 47, 47, 47],\r\n        [22,  2,  3,  3,  7, 28, 29,  6,  1,  7,  7, 18, 42, 45, 46, 45, 35, 50, 50, 50],\r\n        [29, 16,  7,  7,  0,  1,  1, 21, 22, 21, 22,  8, 42, 45, 45, 46, 44,  8,  8,  8],\r\n        [21, 22,  9,  0,  0,  0,  7, 28, 29, 28, 29, 21, 22, 50, 50, 50,  8,  2,  3,  3],\r\n    ], document.getElementById('canvas_advanced') as HTMLCanvasElement);\r\n\r\n    let activeButton: HTMLButtonElement;\r\n\r\n    function switchSeason(season) {\r\n        const seasonToTilesheet = {\r\n            spring: sheetSpring,\r\n            summer: sheetSummer,\r\n            fall: sheetFall,\r\n            winter: sheetWinter,\r\n        };\r\n\r\n        activeButton = document.querySelector(`[data-season=\"${season}\"]`);\r\n        activeButton.disabled = true;\r\n        activeButton.classList.add('is-outlined');\r\n\r\n        scene\r\n            .resetTiles()\r\n            .useTilesheet(seasonToTilesheet[season])\r\n            .render();\r\n    }\r\n\r\n    document.body.addEventListener('click', (e) => {\r\n        const target = e.target as HTMLButtonElement;\r\n\r\n        if (!target.dataset.season) {\r\n            return;\r\n        }\r\n\r\n        activeButton.disabled = false;\r\n        activeButton.classList.remove('is-outlined');\r\n\r\n        switchSeason(target.dataset.season);\r\n       \r\n        e.preventDefault();\r\n    });\r\n\r\n    switchSeason('spring');\r\n};","import { Scene } from '../../';\r\n\r\nexport default (sheetSpring, sheetWinter) => {\r\n    const tiles = [\r\n        [21, 22, 23, 24,  9],\r\n        [28, 29, 30, 31,  9],\r\n        [22,  5,  3,  6, 10],\r\n        [29,  5, 17, 17, 18],\r\n    ];\r\n\r\n    const springSceneCanvas = document.getElementById('scene_sample') as HTMLCanvasElement;\r\n    const mySpringScene = new Scene(tiles, springSceneCanvas);\r\n\r\n    mySpringScene\r\n        .useTilesheet(sheetSpring)\r\n        .render();\r\n\r\n    const winterSceneCanvas = document.getElementById('scene_sample_winter') as HTMLCanvasElement;\r\n    const myWinterScene = new Scene(tiles, winterSceneCanvas);\r\n\r\n    myWinterScene\r\n        .useTilesheet(sheetWinter)\r\n        .render();\r\n\r\n    const tilesWithSomeAnimation = [\r\n        [ 1,  1,  1,  1,  1],\r\n        [17, 17, 17, 17, 17],\r\n        [36, 36, 36, 36, 36],\r\n        [38, 38, 38, 38, 38],\r\n    ];\r\n\r\n    const animatedSceneCanvas = document.getElementById('scene_sample_animation') as HTMLCanvasElement;\r\n    const myAnimatedScene = new Scene(tilesWithSomeAnimation, animatedSceneCanvas);\r\n\r\n    myAnimatedScene\r\n        .useTilesheet(sheetSpring)\r\n        .render();\r\n};","import { Sprite } from '../../';\r\n\r\nexport default (sheetSpring) => {\r\n    const flowers = new Sprite(document.getElementById('canvas_sprite_animated') as HTMLCanvasElement);\r\n    \r\n    flowers\r\n        .useTilesheet(sheetSpring)\r\n        .playAnimation('flower')\r\n        .render();\r\n\r\n    const advancedSprite = new Sprite(document.getElementById('canvas_sprite_animated_advanced') as HTMLCanvasElement);\r\n    advancedSprite.useTilesheet(sheetSpring);\r\n\r\n    let activeButton: HTMLButtonElement;\r\n\r\n    function switchAnimation(newAnimation) {\r\n        const possibleAnimations = ['water', 'flower'];\r\n\r\n        activeButton = document.querySelector(`[data-animation=\"${newAnimation}\"]`);\r\n        activeButton.disabled = true;\r\n        activeButton.classList.add('is-outlined');\r\n    \r\n        if (possibleAnimations.indexOf(newAnimation) >= 0) {\r\n            advancedSprite.playAnimation(newAnimation).render();\r\n        } else {\r\n            advancedSprite.stopAnimation();\r\n        }\r\n    }\r\n\r\n    document.body.addEventListener('click', (e) => {\r\n        const target = e.target as HTMLButtonElement;\r\n\r\n        if (!target.dataset.animation) {\r\n            return;\r\n        }\r\n\r\n        activeButton.disabled = false;\r\n        activeButton.classList.remove('is-outlined');\r\n\r\n        switchAnimation(target.dataset.animation);\r\n       \r\n        e.preventDefault();\r\n    });\r\n\r\n    switchAnimation('flower');\r\n};","import { Tilesheet } from '../';\r\n\r\nimport tilesheetBushSample from './scripts/tilesheet_bush';\r\nimport tilesheetIndexSample from './scripts/tilesheet_index_sample';\r\nimport tilesheetAdvanced from './scripts/tilesheet_advanced';\r\nimport sceneSample from './scripts/scene_sample';\r\nimport spriteAnimated from './scripts/sprite_animated';\r\nimport imageSpring from './images/spring.png';\r\nimport imageSummer from './images/summer.png';\r\nimport imageFall from './images/fall.png';\r\nimport imageWinter from './images/winter.png';\r\n\r\n(async () => {\r\n    const sheetSpring = new Tilesheet(imageSpring);\r\n    const sheetSummer = new Tilesheet(imageSummer);\r\n    const sheetFall = new Tilesheet(imageFall);\r\n    const sheetWinter = new Tilesheet(imageWinter);\r\n\r\n    const animationSpeed = 300;\r\n    const waterAnimation = {\r\n        tiles: [38, 39, 40, 41],\r\n        speed: animationSpeed,\r\n        name: 'water',\r\n    };\r\n    const driedWater1Animation = {\r\n        tiles: [45, 39],\r\n        speed: animationSpeed,\r\n    };\r\n    const driedWater2Animation = {\r\n        tiles: [46, 39],\r\n        speed: animationSpeed,\r\n    };\r\n    const frozenWaterAnimation = {\r\n        tiles: [47, 39],\r\n        speed: animationSpeed,\r\n    };\r\n    const flowersAnimation = {\r\n        tiles: [1, 12, 19, 20],\r\n        speed: animationSpeed,\r\n        name: 'flower',\r\n    };\r\n\r\n    sheetSpring.setAnimations([waterAnimation, driedWater1Animation, driedWater2Animation, frozenWaterAnimation, flowersAnimation]);\r\n    sheetSummer.setAnimations([waterAnimation, frozenWaterAnimation, flowersAnimation]);\r\n    sheetFall.setAnimations([waterAnimation, driedWater1Animation, driedWater2Animation, frozenWaterAnimation]);\r\n    sheetWinter.setAnimations([waterAnimation, driedWater1Animation, driedWater2Animation]);\r\n    \r\n    const allSheets = [sheetSpring, sheetSummer, sheetFall, sheetWinter];\r\n    \r\n    allSheets.forEach((sheet) => {\r\n        sheet.setTileSize(16).setMargin(1);\r\n    });\r\n    \r\n    await Promise.all(allSheets.map(sheet => sheet.waitForLoading()));\r\n\r\n    tilesheetIndexSample(sheetSpring);\r\n    tilesheetBushSample(sheetSpring, sheetFall);\r\n    spriteAnimated(sheetSpring);\r\n    sceneSample(sheetSpring, sheetWinter);\r\n    tilesheetAdvanced(sheetSpring, sheetSummer, sheetFall, sheetWinter);    \r\n})();"]}